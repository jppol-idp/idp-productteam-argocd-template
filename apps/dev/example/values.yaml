replicaCount: 2

image:
  repository: 354918371398.dkr.ecr.eu-west-1.amazonaws.com/koa/comment-service-net # TODO ensure the correct image is set
  pullPolicy: IfNotPresent # BLABLA
  tag: "test"

temp_aws_account: "931827427725" # BLABLA
temp_oidc_provider: "oidc.eks.eu-west-1.amazonaws.com/id/B04FF857637D8B05C919995404EE2ECD" # BLABLA

serviceAccount:
  annotations:
    eks.amazonaws.com/role-arn: "arn:aws:iam::931827427725:role/crossplane/example-dev-sa" # BLABLA
  irsa:
    enabled: true
    iamPolicyStatements:
      # - Effect: Allow
      #   Action:
      #     - secretsmanager:GetResourcePolicy
      #     - secretsmanager:GetSecretValue
      #     - secretsmanager:DescribeSecret
      #     - secretsmanager:ListSecretVersionIds
      #   Resource:
      #     - "arn:aws:secretsmanager:eu-west-1:931827427725:secret:comment-service-net/*"
      #     - "arn:aws:secretsmanager:eu-west-1:931827427725:secret:KOA/Development/*"

env:
  # - name: ASPNETCORE_ENVIRONMENT
  #   value: Development
  # - name: ASPNETCORE_HTTP_PORTS
  #   value: "8080"

service:
  type: ClusterIP
  port: 8080

# TODO define the ingress for your service
ingress:
  enabled: false
  type: nginx # nginx/alb
  fqdn: example.koa-dev.idp.jppol.dk

  nginx:
    public:
      enabled: true
    private:
      enabled: true
  alb:
    group: idp-shared
    groupOrder: 1
    certificate:
      useWildCardCertificate: true # requires a wildcard certificate already created in ACM.
    annotations: {}

resources:
  requests:
    memory: "128Mi"
    cpu: "250m"
  limits:
    memory: "128Mi"

# This is to setup the liveness and readiness probes more information can be found here: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/
livenessProbe:
  httpGet:
    path: /
    port: 8080
readinessProbe:
  httpGet:
    path: /
    port: 8080

# This section is for setting up autoscaling more information can be found here: https://kubernetes.io/docs/concepts/workloads/autoscaling/
autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 100
  targetCPUUtilizationPercentage: 80
